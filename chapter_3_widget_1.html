<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3: Your Brain's Brilliant Shortcuts</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Georgia', 'Times New Roman', serif;
            line-height: 1.7;
            color: #000000;
            background-color: #FFFFFF;
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .chapter-header {
            background: linear-gradient(135deg, #51247A 0%, #962A8B 100%);
            color: #FFFFFF;
            padding: 60px 40px;
            margin: -20px -20px 60px -20px;
            text-align: center;
            border-radius: 0 0 20px 20px;
            box-shadow: 0 4px 15px rgba(81, 36, 122, 0.2);
        }

        .chapter-number {
            font-size: 1.2em;
            font-weight: 300;
            letter-spacing: 3px;
            text-transform: uppercase;
            margin-bottom: 15px;
            opacity: 0.9;
        }

        .chapter-title {
            font-size: 2.8em;
            font-weight: 700;
            line-height: 1.2;
            margin-bottom: 20px;
        }

        .chapter-subtitle {
            font-size: 1.3em;
            font-weight: 300;
            opacity: 0.9;
            font-style: italic;
        }

        /* Enhanced Anchoring Effect Widget Styles */
        .anchoring-widget {
            font-family: 'Roboto', Arial, sans-serif;
            max-width: 700px;
            margin: 40px auto;
            padding: 0;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
            background: #fff;
        }

        .anchoring-header {
            background: linear-gradient(135deg, #51247A, #962A8B);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }

        .anchoring-header h2 {
            margin: 0 0 10px 0;
            color: white;
            font-size: 1.8em;
            font-weight: 600;
        }

        .anchoring-header p {
            margin: 0;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.1em;
        }

        .anchoring-content {
            padding: 0;
        }

        .anchoring-progress {
            height: 6px;
            background: #f0f0f0;
            margin: 0;
        }

        .anchoring-progress-bar {
            height: 100%;
            width: 0;
            background: linear-gradient(to right, #51247A, #962A8B);
            transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .anchoring-step {
            padding: 25px;
            border-bottom: 1px solid #f0f0f0;
            transition: all 0.3s ease;
            background: white;
        }

        .anchoring-step.active {
            background: #fcfaff;
        }

        .anchoring-step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 30px;
            height: 30px;
            background: #51247A;
            color: white;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
        }

        .anchoring-step-title {
            font-weight: 600;
            color: #51247A;
            font-size: 1.2em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .anchoring-display {
            font-size: 2.5em;
            color: #51247A;
            text-align: center;
            padding: 30px 20px;
            margin: 20px 0;
            background: linear-gradient(to right, #f1eaf7, #fcfaff);
            border-radius: 8px;
            font-weight: bold;
            box-shadow: inset 0 0 10px rgba(81, 36, 122, 0.05);
            transition: all 0.4s ease;
        }

        .anchoring-display.pulse {
            animation: anchorPulse 1s ease;
        }

        @keyframes anchorPulse {
            0% {
                transform: scale(1);
            }

            50% {
                transform: scale(1.05);
            }

            100% {
                transform: scale(1);
            }
        }

        .anchoring-input-group {
            display: flex;
            gap: 15px;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .anchoring-input {
            flex: 1;
            min-width: 150px;
            padding: 12px 15px;
            border: 2px solid #d4c5e5;
            border-radius: 8px;
            font-size: 1.1em;
            transition: all 0.3s ease;
            background: #fcfaff;
        }

        .anchoring-input:focus {
            outline: none;
            border-color: #51247A;
            box-shadow: 0 0 0 3px rgba(81, 36, 122, 0.1);
        }

        .anchoring-button {
            background: linear-gradient(to right, #51247A, #962A8B);
            color: white;
            border: none;
            padding: 13px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            min-width: 180px;
        }

        .anchoring-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(150, 42, 139, 0.2);
        }

        .anchoring-button:active {
            transform: translateY(0);
        }

        .anchoring-button:disabled {
            background: #d4d4d4;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .anchoring-button svg {
            width: 18px;
            height: 18px;
            transition: transform 0.3s ease;
        }

        .anchoring-button:hover svg {
            transform: translateX(3px);
        }

        .anchoring-result {
            margin: 20px 0;
            padding: 30px;
            background: #f9f7fc;
            border-radius: 8px;
            display: none;
        }

        .anchoring-chart {
            height: 250px;
            margin: 30px 0;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            gap: 40px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            position: relative;
        }

        .anchoring-chart:before {
            content: "";
            position: absolute;
            left: 0;
            right: 0;
            bottom: 60px;
            height: 1px;
            background: #e0e0e0;
            z-index: 0;
        }

        .anchoring-bar-wrapper {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 70px;
            position: relative;
            z-index: 1;
        }

        .anchoring-bar {
            width: 70px;
            background: linear-gradient(to top, #51247A, #962A8B);
            border-radius: 6px 6px 0 0;
            transition: height 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            height: 0;
        }

        .anchoring-bar-label {
            font-weight: 600;
            text-align: center;
            margin-top: 15px;
            font-size: 0.9em;
            color: #333;
        }

        .anchoring-bar-value {
            position: absolute;
            top: -30px;
            font-weight: bold;
            color: #51247A;
        }

        .anchoring-explanation {
            display: none;
            margin: 20px 0;
            padding: 30px;
            background: #f0f8ff;
            border-left: 4px solid #4085C6;
            border-radius: 8px;
        }

        .anchoring-explanation h3 {
            color: #4085C6;
            margin-top: 0;
        }

        .anchoring-stats {
            display: none;
            margin: 25px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .anchoring-stat-item {
            display: flex;
            justify-content: space-between;
            margin: 12px 0;
            padding: 8px 0;
            border-bottom: 1px solid #f5f5f5;
        }

        .anchoring-stat-value {
            font-weight: bold;
            color: #51247A;
        }

        .anchoring-actions {
            display: flex;
            justify-content: center;
            margin-top: 30px;
        }

        .light-button {
            background: #f7f1f7;
            color: #51247A;
            border: 1px solid #d4c5e5;
            padding: 13px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 0 10px;
        }

        .light-button:hover {
            background: #efe5f5;
            transform: translateY(-2px);
        }

        .anchoring-comparison {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin: 20px 0;
            text-align: center;
        }

        .anchoring-probability-box {
            background: white;
            padding: 15px;
            border-radius: 4px;
            border: 1px solid #51247A;
        }

        .anchoring-probability-value {
            font-size: 24px;
            font-weight: bold;
            color: #51247A;
            margin: 10px 0;
        }

        .anchoring-hidden {
            display: none;
        }

        @media (max-width: 768px) {
            .anchoring-widget {
                margin: 20px 0;
            }
            
            .anchoring-chart {
                gap: 20px;
            }
            
            .anchoring-bar-wrapper {
                width: 50px;
            }
            
            .anchoring-bar {
                width: 50px;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-header">
        <div class="chapter-number">Chapter 3</div>
        <h1 class="chapter-title">Your Brain's Brilliant Shortcuts (And Where They Lead You Astray)</h1>
        <div class="chapter-subtitle">Understanding Heuristics and Biases in Human Decision-Making</div>
    </div>

    <!-- Anchoring Widget -->
    <div class="anchoring-widget">
        <div class="anchoring-header">
            <h2>Experience Anchoring Bias</h2>
            <p>See how initial numbers unconsciously influence your estimates</p>
        </div>

        <div class="anchoring-progress">
            <div id="anchoringProgressBar" class="anchoring-progress-bar"></div>
        </div>

        <div class="anchoring-content">
            <div class="anchoring-step active" id="anchoringStep1">
                <div class="anchoring-step-title">
                    <span class="anchoring-step-number">1</span>
                    Get Your Random Anchor
                </div>
                <p>Click the button to receive a random number between 1-100. This will be your "anchor" number.</p>
                <button class="anchoring-button" onclick="showAnchorNumber()">
                    Get Random Number
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M5 12h14M12 5l7 7-7 7" />
                    </svg>
                </button>
                <div id="anchorNumberDisplay" class="anchoring-display"></div>
            </div>

            <div class="anchoring-step" id="anchoringStep2">
                <div class="anchoring-step-title">
                    <span class="anchoring-step-number">2</span>
                    Estimate the Answer
                </div>
                <p>Without searching online, estimate how many countries are members of the United Nations (UN).</p>
                <div class="anchoring-input-group">
                    <input type="number" id="anchoringEstimate" class="anchoring-input" min="1" max="500"
                        placeholder="Your estimate">
                    <button class="anchoring-button" onclick="submitAnchoring()" id="anchoringSubmitBtn" disabled>
                        Submit Estimate
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
                <p id="anchoringInputFeedback" style="color: #666; font-size: 0.9em;"></p>
            </div>

            <div class="anchoring-step" id="anchoringStep3">
                <div class="anchoring-step-title">
                    <span class="anchoring-step-number">3</span>
                    Review Your Results
                </div>
                <div id="anchoringResult" class="anchoring-result">
                    <h3>Your Results</h3>
                    <p id="anchoringResultText"></p>
                    <div id="anchoringChart" class="anchoring-chart">
                        <div class="anchoring-bar-wrapper">
                            <span id="anchorBarValue" class="anchoring-bar-value">0</span>
                            <div id="anchorBar" class="anchoring-bar"></div>
                            <div class="anchoring-bar-label">Your Anchor</div>
                        </div>
                        <div class="anchoring-bar-wrapper">
                            <span id="estimateBarValue" class="anchoring-bar-value">0</span>
                            <div id="estimateBar" class="anchoring-bar"></div>
                            <div class="anchoring-bar-label">Your Estimate</div>
                        </div>
                        <div class="anchoring-bar-wrapper">
                            <span id="actualBarValue" class="anchoring-bar-value">193</span>
                            <div id="actualBar" class="anchoring-bar"></div>
                            <div class="anchoring-bar-label">Actual Value</div>
                        </div>
                    </div>
                    <button class="anchoring-button" onclick="showAnchoringExplanation()">
                        Analyse Your Bias
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M5 12h14M12 5l7 7-7 7" />
                        </svg>
                    </button>
                </div>
            </div>

            <div class="anchoring-step" id="anchoringStep4">
                <div class="anchoring-step-title">
                    <span class="anchoring-step-number">4</span>
                    Understanding Anchoring Bias
                </div>
                <div id="anchoringExplanation" class="anchoring-explanation">
                    <h3>Understanding Your Anchoring Bias</h3>
                    <div id="anchoringExplanationText"></div>
                    <div class="anchoring-stats" id="anchoringStats">
                        <div class="anchoring-stat-item">
                            <span>Deviation from Actual:</span>
                            <span id="anchoringDeviation" class="anchoring-stat-value"></span>
                        </div>
                        <div class="anchoring-stat-item">
                            <span>Anchor Influence Score:</span>
                            <span id="anchoringInfluence" class="anchoring-stat-value"></span>
                        </div>
                    </div>
                    <div class="anchoring-actions">
                        <button class="light-button" onclick="resetAnchoring()">Try Again</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const ANCHORING_ACTUAL_VALUE = 193;
        let anchoringCurrentAnchor = 0;
        let currentAnchoringStep = 1;

        function updateAnchoringProgress() {
            const progress = ((currentAnchoringStep - 1) / 3) * 100;
            document.getElementById('anchoringProgressBar').style.width = `${progress}%`;
        }

        function moveToAnchoringStep(step) {
            // Hide all steps
            document.querySelectorAll('.anchoring-widget .anchoring-step').forEach(s => {
                s.classList.remove('active');
            });

            // Show requested step
            document.getElementById(`anchoringStep${step}`).classList.add('active');

            currentAnchoringStep = step;
            updateAnchoringProgress();

            // Scroll to the widget
            document.querySelector('.anchoring-widget').scrollIntoView({
                behavior: 'smooth',
                block: 'start'
            });
        }

        function showAnchorNumber() {
            anchoringCurrentAnchor = Math.floor(Math.random() * 100) + 1;
            const anchorDisplay = document.getElementById('anchorNumberDisplay');
            anchorDisplay.textContent = anchoringCurrentAnchor;
            anchorDisplay.classList.add('pulse');

            setTimeout(() => {
                moveToAnchoringStep(2);
            }, 1000);
        }

        document.getElementById('anchoringEstimate').addEventListener('input', function () {
            const submitBtn = document.getElementById('anchoringSubmitBtn');
            const feedback = document.getElementById('anchoringInputFeedback');
            const value = this.value;

            if (value === '') {
                feedback.textContent = "Please enter a number";
                submitBtn.disabled = true;
            } else if (value < 1 || value > 500) {
                feedback.textContent = "Please enter a number between 1 and 500";
                submitBtn.disabled = true;
            } else {
                feedback.textContent = "";
                submitBtn.disabled = false;
            }
        });

        function submitAnchoring() {
            const estimate = parseInt(document.getElementById('anchoringEstimate').value);
            const resultText = document.getElementById('anchoringResultText');

            resultText.innerHTML = `
                <p>Thank you for your estimate. Here's how your numbers compare:</p>
            `;

            document.getElementById('anchoringResult').style.display = 'block';

            // Set bar values
            document.getElementById('anchorBarValue').textContent = anchoringCurrentAnchor;
            document.getElementById('estimateBarValue').textContent = estimate;
            document.getElementById('actualBarValue').textContent = ANCHORING_ACTUAL_VALUE;

            // Animate bars with a slight delay
            setTimeout(() => {
                const maxHeight = 200; // Maximum bar height in pixels
                const maxValue = Math.max(anchoringCurrentAnchor, estimate, ANCHORING_ACTUAL_VALUE);

                document.getElementById('anchorBar').style.height = `${(anchoringCurrentAnchor / maxValue) * maxHeight}px`;

                setTimeout(() => {
                    document.getElementById('estimateBar').style.height = `${(estimate / maxValue) * maxHeight}px`;

                    setTimeout(() => {
                        document.getElementById('actualBar').style.height = `${(ANCHORING_ACTUAL_VALUE / maxValue) * maxHeight}px`;
                    }, 200);
                }, 200);
            }, 300);

            moveToAnchoringStep(3);
        }

        function showAnchoringExplanation() {
            const estimate = parseInt(document.getElementById('anchoringEstimate').value);
            const deviation = Math.abs(estimate - ANCHORING_ACTUAL_VALUE);
            const influence = calculateAnchorInfluence(anchoringCurrentAnchor, estimate, ANCHORING_ACTUAL_VALUE);

            document.getElementById('anchoringExplanationText').innerHTML = generateAnchoringExplanation(anchoringCurrentAnchor, estimate);
            document.getElementById('anchoringDeviation').textContent = `${deviation} countries`;
            document.getElementById('anchoringInfluence').textContent = `${influence}%`;

            document.getElementById('anchoringExplanation').style.display = 'block';
            document.getElementById('anchoringStats').style.display = 'block';

            moveToAnchoringStep(4);
        }

        function calculateAnchorInfluence(anchor, estimate, actual) {
            // If anchor and actual are on opposite sides of the estimate,
            // or if the anchor equals the actual, the influence is minimal
            if ((anchor <= estimate && estimate <= actual) ||
                (anchor >= estimate && estimate >= actual) ||
                anchor === actual) {
                return Math.min(100, Math.max(0, Math.round(
                    (1 - Math.abs(estimate - anchor) / Math.abs(actual - anchor)) * 100
                )));
            }

            // Strong anchoring influence - the estimate is pulled beyond the actual value in the direction of the anchor
            return 85 + Math.min(15, Math.abs(estimate - actual) / 10);
        }

        function generateAnchoringExplanation(anchor, estimate) {
            let explanation = "";

            if (anchor < ANCHORING_ACTUAL_VALUE && estimate < ANCHORING_ACTUAL_VALUE) {
                explanation = `<p>You received a low anchor (${anchor}), and your estimate (${estimate}) was also lower than the actual value (${ANCHORING_ACTUAL_VALUE}). This suggests your anchor pulled your estimate downward.</p>`;
            } else if (anchor > ANCHORING_ACTUAL_VALUE && estimate > ANCHORING_ACTUAL_VALUE) {
                explanation = `<p>You received a high anchor (${anchor}), and your estimate (${estimate}) was also higher than the actual value (${ANCHORING_ACTUAL_VALUE}). This suggests your anchor pulled your estimate upward.</p>`;
            } else if (anchor < ANCHORING_ACTUAL_VALUE && estimate > ANCHORING_ACTUAL_VALUE) {
                explanation = `<p>Interestingly, you received a low anchor (${anchor}), but your estimate (${estimate}) was higher than the actual value (${ANCHORING_ACTUAL_VALUE}). This is less typical and suggests you may have actively adjusted far from your anchor.</p>`;
            } else {
                explanation = `<p>Interestingly, you received a high anchor (${anchor}), but your estimate (${estimate}) was lower than the actual value (${ANCHORING_ACTUAL_VALUE}). This is less typical and suggests you may have actively adjusted far from your anchor.</p>`;
            }

            explanation += `
                <p>Anchoring bias occurs when initial information (like your random number ${anchor}) serves as a reference point that influences subsequent judgments. Even though the random number was completely unrelated to the UN question, it can still affect your estimate through unconscious cognitive processes.</p>
                
                <p>This effect was first documented by psychologists Tversky and Kahneman, who spun a "wheel of fortune" to generate random numbers before asking participants to estimate values like the percentage of African countries in the UN. Those who saw higher random numbers gave higher estimates.</p>
                
                <p>Anchoring explains many real-world phenomena, from why first offers strongly influence negotiations to how suggested retail prices affect our perception of value. Being aware of this bias can help you make more objective judgments in the future.</p>
            `;

            return explanation;
        }

        function resetAnchoring() {
            // Reset values and displays
            document.getElementById('anchorNumberDisplay').textContent = '';
            document.getElementById('anchorNumberDisplay').classList.remove('pulse');
            document.getElementById('anchoringEstimate').value = '';
            document.getElementById('anchoringResult').style.display = 'none';
            document.getElementById('anchoringExplanation').style.display = 'none';

            // Reset bar heights
            document.getElementById('anchorBar').style.height = '0';
            document.getElementById('estimateBar').style.height = '0';
            document.getElementById('actualBar').style.height = '0';

            // Go back to step 1
            moveToAnchoringStep(1);
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function () {
            updateAnchoringProgress();
        });
    </script>
</body>
</html>